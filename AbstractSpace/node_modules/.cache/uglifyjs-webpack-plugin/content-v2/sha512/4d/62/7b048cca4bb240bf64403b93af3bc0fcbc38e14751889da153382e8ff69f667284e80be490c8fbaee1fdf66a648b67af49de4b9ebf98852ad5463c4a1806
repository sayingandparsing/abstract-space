{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"/home/reagan/code/proj/abstract-space/AbstractSpace/src\",n(n.s=10)}([function(e,t){e.exports=require(\"electron\")},function(e,t){e.exports=require(\"react\")},function(e,t,n){\"use strict\";var o=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,c)}s((o=o.apply(e,t||[])).next())})},r=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(0),a=function(){function e(e){this.updateView=e.stateUpdateCallback(),this.window=i.remote.getCurrentWindow()}return e.prototype.display=function(e,t){return o(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this.listenForInput(t),[4,this.updateView(e)];case 1:return n.sent(),this.window.hidden&&this.window.show(),[2]}})})},e.prototype.breakChain=function(){this.window.hide()},e.prototype.listenForInput=function(e){window.addEventListener(\"keydown\",function(t){var n=t.key;1===n.length&&e({type:\"key\",content:n})})},e}();t.SingleViewService=a},function(e,t){e.exports=require(\"amqplib/callback_api\")},function(e,t){e.exports=require(\"net\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(4),r=(n(0).remote.getGlobal(\"logger\"),function(){function e(e,t){void 0===t&&(t={}),this.port=e,this.dataHooks=t,console.log(\"Created ProcessInterface\")}return e.prototype.createConnection=function(e){var t=this;this.socket=o.createConnection(e,function(e){e.on(\"data\",function(e){console.log(\"ProcessInterface received a message\"),t.handleIncoming(t.parse(e))})})},e.prototype.handleIncoming=function(e){var t=e.type,n=e.data;this.dataHooks[t](n)},e.prototype.on=function(e,t){return this.dataHooks[e]=t,this},e.prototype.parse=function(e){return JSON.parse(e.trim())},e.prototype.send=function(e,t,n){void 0===n&&(n=null),this.socket.write({type:e,content:t,meta:n}.toString())},e}());t.ProcessInterface=r;var i=function(){function e(e){this.dataHooks={},this.path=e}return e.prototype.createServer=function(){var e=this;this.server=o.createServer(),this.server.listen(this.path),this.server.on(\"connection\",function(t){t.on(\"message\",function(n){e.handleIncoming(e.parse(n),t)})})},e.prototype.handleIncoming=function(e,t){var n=e.type,o=e.content;this.dataHooks[n](o)},e.prototype.on=function(e,t){return this.dataHooks[e]=t,this},e.prototype.parse=function(e){return JSON.parse(e)},e}();t.IpcServer=i;var a=n(3),c=function(){function e(e){this.dataHooks={},this.name=e}return e.prototype.createServer=function(){var e=this;a.connect(\"amqp://localhost\",function(t,n){n.createChannel(function(t,n){n.assertQueue(e.name,{durable:!1}),console.log(\"created channel\"),n.consume(e.name,function(t){e.handleIncoming(e.parse(t),function(e){console.log(\"replied to sender on queue\");var o=new Buffer(JSON.stringify(e));n.sendToQueue(t.properties.replyTo,o)}),n.ack(t)})})})},e.prototype.handleIncoming=function(e,t){var n,o=e.type,r=e.content;(console.log(\"received cue message: \"+o),null!==(n=e.hasOwnProperty(\"subtype\")?e.subtype:null))?(0,this.dataHooks[o][n])(r,t):(0,this.dataHooks[o])(r,t)},e.prototype.on=function(e,t){if(\"string\"==typeof e)this.dataHooks[e]=t;else{var n,o=e[0];n=e[1],this.dataHooks[o]={},this.dataHooks[o][n]=t}return this},e.prototype.parse=function(e){return JSON.parse(e.content.toString(\"utf-8\"))},e}();t.RabbitServer=c},function(e,t){e.exports=require(\"react-dom\")},function(e,t,n){\"use strict\";var o,r=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(1),a=(n(0).remote.getGlobal(\"logger\"),function(e){function t(t){var n=e.call(this,t)||this;return n.state={selections:[]},n}return r(t,e),t.prototype.stateUpdateCallback=function(){var e=this;return function(t){e.setState({selections:t})}},t.prototype.viewCallbacks=function(){var t=this;return{update:this.stateUpdateCallback(),reset:function(){return e.prototype.setState.call(t,{selections:[]})}}},t.prototype.render=function(){console.log(\"Rendering view\");var e=this.state.selections.map(function(e){return i.createElement(\"tr\",{className:\"list-row\"},i.createElement(\"td\",{className:\"list-key\"},e.symbol),i.createElement(\"td\",{className:\"list-value\"},e.label))});return console.log(e),i.createElement(\"table\",{className:\"list-table\"},i.createElement(\"tbody\",null,e))},t}(i.Component));t.AbstractView=a},function(e,t){e.exports=require(\"events\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(8),r=(n(0).remote.getGlobal(\"logger\"),function(){function e(e,t){this.viewEmitter=new o,this.updateViewState=e.stateUpdateCallback(),this.deactivate=t}return e.prototype.resetContext=function(e){console.log(e),this.context={root:e,current:e,level:e.subtree.map(function(e){return e.data}),path:[]},console.log(this.context.level),this.updateViewState(this.context.level)},e.prototype.processKeyEvent=function(e){if(\"Escape\"===e)return console.log(\"Terminated\"),this.callback({type:\"failed\",path:this.context.path}),void this.deactivate();if(this.context.level.map(function(e){return e.symbol}).indexOf(e)>-1){console.log(\"Symbol found for transmitted key\"),this.context.path.push(e);var t=this.context.current;if(this.context.current=t.subtree[t.subtree.map(function(e){return e.data.symbol}).indexOf(e)],this.isTerminal(this.context.current)){console.log(\"Node is terminal\");var n=this.context.current;return this.callback({type:\"command\",path:this.context.path,content:n.command}),void this.deactivate()}var o=this.extractLevel(this.context.current);if(!o)return this.callback({type:\"failure\",path:this.context.path}),void this.deactivate();this.context.level=o,console.log(\"updating view state\"),this.updateViewState(o)}},e.prototype.sendShutdownSignal=function(){},e.prototype.connectedTo=function(e,t){for(var n=0,o=e.subtree;n<o.length;n++){if(o[n].data.symbol===t)return!0}return!1},e.prototype.extractLevel=function(e){return e.subtree.map(function(e){return e.data})},e.prototype.isTerminal=function(e){return console.log(\"Checking if node is terminal\"),void 0!==e.command},e}());t.TreeTraversal=r},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(9),r=n(7),i=n(1),a=n(6),c=n(5),s=n(2),u=n(0).remote,l=u.getGlobal(\"logger\"),p=function(){function e(){var e=this;this.main=document.getElementById(\"main\"),this.a=document.createElement(\"p\"),this.view=a.render(i.createElement(r.AbstractView,null),this.main),this.traversal=new o.TreeTraversal(this.view,this.deactivateSelection),this.viewService=new s.SingleViewService(this.view),this.path=\"display\",console.log(\"initializing process controller\"),this.commandTrees={},this.ipc=new c.RabbitServer(this.path).on(\"tree\",function(t,n){console.log(\"received tree\");var o=t.data.symbol;e.commandTrees[o]=t}).on([\"display\",\"tree\"],function(t,n){var o=e.commandTrees.standard;console.log(\"received display request\"),null!==o?e.run_traversal(o,n):(l.error(\"couldn+'t find a tree called \"+t),n({type:\"failed\"}))}).on(\"chain view\",function(t,n){e.viewService.display(t,n)}).on(\"end chain\",function(t,n){e.viewService.breakChain()}).createServer()}return e.prototype.processDisplayRequest=function(e){if(e.hasOwnProperty(\"subtype\"))switch(e.subtype){case\"view\":break;case\"tree\":null!==this.commandTrees[e.content]||l.error(\"couldn+'t find a tree called \"+e.content)}else l.error(\"Expected a subtype for display request\")},e.prototype.run_traversal=function(e,t){var n=this;console.log(\"running traversal\"),window.addEventListener(\"keydown\",function(e){if(n.active)try{n.traversal.processKeyEvent(e.key)}catch(e){}}),this.activateSelection(e,t)},e.prototype.activateSelection=function(e,t){this.traversal.callback=t,this.traversal.resetContext(e),this.active=!0,u.getCurrentWindow().show()},e.prototype.deactivateSelection=function(){this.active=!1,u.getCurrentWindow().hide()},e.prototype.publishTraversalState=function(e){},e}();console.log(\"executing\");new p}]);","extractedComments":[]}